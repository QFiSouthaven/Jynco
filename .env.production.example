# =============================================================================
# VIDEO FOUNDRY - PRODUCTION MODE CONFIGURATION
# =============================================================================
# This file contains the required environment variables for PRODUCTION mode
# Copy to .env and fill in with your actual values

# =============================================================================
# EXECUTION MODE
# =============================================================================
JYNCO_EXECUTION_MODE=production

# =============================================================================
# SECRETS MANAGEMENT (VAULT - MANDATORY)
# =============================================================================
VAULT_ADDR=https://vault.company.com
VAULT_TOKEN=s.xyz123...
VAULT_NAMESPACE=videofoundry

# =============================================================================
# AUTHENTICATION / IAM (MANDATORY)
# =============================================================================
OIDC_PROVIDER_URL=https://keycloak.company.com/realms/videofoundry
OIDC_CLIENT_ID=videofoundry-prod
OIDC_CLIENT_SECRET=<get-from-vault>
ENABLE_IAM=true

# =============================================================================
# STORAGE (S3 - MANDATORY)
# =============================================================================
S3_BUCKET=videofoundry-production
AWS_ACCESS_KEY_ID=<get-from-vault>
AWS_SECRET_ACCESS_KEY=<get-from-vault>
AWS_REGION=us-east-1
USE_S3_STORAGE=true

# =============================================================================
# DATABASE (MANDATORY)
# =============================================================================
DATABASE_URL=postgresql://videofoundry:${DB_PASSWORD}@postgres.internal:5432/videofoundry
POSTGRES_PASSWORD=<get-from-vault>

# =============================================================================
# REDIS (MANDATORY)
# =============================================================================
REDIS_URL=redis://:${REDIS_PASSWORD}@redis.internal:6379/0
REDIS_PASSWORD=<get-from-vault>

# =============================================================================
# RABBITMQ (MANDATORY)
# =============================================================================
RABBITMQ_URL=amqp://${RABBITMQ_USER}:${RABBITMQ_PASSWORD}@rabbitmq.internal:5672/
RABBITMQ_USER=videofoundry
RABBITMQ_PASSWORD=<get-from-vault>
SEGMENT_QUEUE_NAME=segment_generation
COMPOSITION_QUEUE_NAME=video_composition

# =============================================================================
# AI MODEL APIS (FROM VAULT)
# =============================================================================
RUNWAY_API_KEY=<get-from-vault>
STABILITY_API_KEY=<get-from-vault>
COMFYUI_URL=http://comfyui.internal:8188

# =============================================================================
# SECURITY CONFIGURATION (ENFORCED)
# =============================================================================
ENABLE_WORKFLOW_VETTING=true
WORKFLOW_ALLOWLIST_PATH=/config/workflow_allowlist.yaml
ENABLE_NETWORK_ISOLATION=true
DOCKER_RUNTIME=runsc

# =============================================================================
# APPLICATION
# =============================================================================
SECRET_KEY=<get-from-vault>
ENVIRONMENT=production
DEBUG=false
CORS_ORIGINS=https://videofoundry.company.com

# Frontend
FRONTEND_API_URL=https://api.videofoundry.company.com

# =============================================================================
# JWT
# =============================================================================
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
# Video Foundry - Production Mode Configuration
# ==============================================
# This configuration is for MULTI-TENANT SAAS deployments
# Maximum security - all protective measures enabled

# Execution Mode (REQUIRED)
JYNCO_EXECUTION_MODE=production

# ============================================================================
# SECRETS MANAGEMENT (REQUIRED in production)
# ============================================================================
VAULT_ADDR=https://vault.example.com
VAULT_TOKEN=hvs.XXXXXXXXXXXXXXXXXXXXXXXX
# Or use AppRole authentication:
# VAULT_ROLE_ID=xxxxx-xxxxx-xxxxx
# VAULT_SECRET_ID=xxxxx-xxxxx-xxxxx

# ============================================================================
# DATABASE (REQUIRED)
# ============================================================================
DATABASE_URL=postgresql://user:password@postgres.example.com:5432/videofoundry
ENABLE_DATABASE_RLS=true  # Row-Level Security REQUIRED in production

# ============================================================================
# CACHE & MESSAGE QUEUE (REQUIRED)
# ============================================================================
REDIS_URL=redis://redis.example.com:6379/0
RABBITMQ_URL=amqp://user:password@rabbitmq.example.com:5672/

# ============================================================================
# CLOUD STORAGE (REQUIRED in production)
# ============================================================================
S3_BUCKET=video-foundry-production
AWS_ACCESS_KEY_ID=AKIAXXXXXXXXX
AWS_SECRET_ACCESS_KEY=xxxxxxxxxxxxxxxxxx
AWS_REGION=us-east-1

# ============================================================================
# IAM / AUTHENTICATION (REQUIRED in production)
# ============================================================================
OIDC_PROVIDER_URL=https://auth.example.com
OIDC_CLIENT_ID=video-foundry-prod
OIDC_CLIENT_SECRET=xxxxxxxxxxxxxxxxxx
OIDC_REDIRECT_URI=https://videofoundry.example.com/auth/callback

# Session Management
SECRET_KEY=CHANGE-THIS-TO-A-SECURE-RANDOM-STRING-IN-PRODUCTION
SESSION_TIMEOUT=3600  # 1 hour

# Multi-Factor Authentication
ENABLE_MFA=true

# ============================================================================
# SECURITY CONTROLS
# ============================================================================

# Sandboxing (REQUIRED: gvisor or firecracker)
SANDBOX_TYPE=gvisor
# SANDBOX_TYPE=firecracker

# Network Policy (MUST be blocked in production)
NETWORK_EGRESS=blocked

# Workflow Vetting (Strict allow-list only)
WORKFLOW_VETTING_STRICT=true

# Audit Logging
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_PATH=/var/log/videofoundry/audit.log

# ============================================================================
# APPLICATION
# ============================================================================
ENVIRONMENT=production
CORS_ORIGINS=https://videofoundry.example.com
LOG_LEVEL=INFO

# ============================================================================
# AI SERVICES (Optional - for cloud AI providers)
# ============================================================================
RUNWAY_API_KEY=your_runway_key_here
STABILITY_API_KEY=your_stability_key_here

# ComfyUI (for internal processing)
COMFYUI_URL=http://comfyui-internal:8188

# ============================================================================
# MONITORING & ALERTING (Recommended)
# ============================================================================
SENTRY_DSN=https://xxxxx@sentry.io/xxxxx
PROMETHEUS_ENABLED=true

# ============================================================================
# NOTES
# ============================================================================
# - ALL values marked REQUIRED must be set or the application will fail to start
# - Use secrets vault for all sensitive values in production
# - Never commit this file with real credentials to version control
# - Rotate credentials regularly
# - Review security logs daily
